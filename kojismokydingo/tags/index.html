
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="English">
  <head>
    <meta charset="utf-8" />
    <title>kojismokydingo.tags &#8212; kojismokydingo 0.9.7 documentation</title>
    <link rel="stylesheet" href="../../_static/pyramid.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="kojismokydingo.users" href="../users/" />
    <link rel="prev" title="kojismokydingo.hosts" href="../hosts/" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head><body>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../users/" title="kojismokydingo.users"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../hosts/" title="kojismokydingo.hosts"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">kojismokydingo 0.9.7 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../" accesskey="U">Core API Reference</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-kojismokydingo.tags">
<span id="kojismokydingo-tags"></span><h1>kojismokydingo.tags<a class="headerlink" href="#module-kojismokydingo.tags" title="Permalink to this headline">¶</a></h1>
<p>Koji Smoky Dingo - tags and targets</p>
<dl class="field-list simple">
<dt class="field-odd">author</dt>
<dd class="field-odd"><p>Christopher O'Brien &lt;<a class="reference external" href="mailto:obriencj&#37;&#52;&#48;gmail&#46;com">obriencj<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>GPL v3</p>
</dd>
</dl>
<dl class="function">
<dt id="kojismokydingo.tags.collect_tag_extras">
<code class="sig-name descname">collect_tag_extras</code><span class="sig-paren">(</span><em class="sig-param">session</em>, <em class="sig-param">taginfo</em>, <em class="sig-param">prefix=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/kojismokydingo/tags/#collect_tag_extras"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#kojismokydingo.tags.collect_tag_extras" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to session.getBuildConfig but with additional information
recording which tag in the inheritance supplied the setting.</p>
<p>Returns an OrderedDict of tag extra settings, keyed by the name of
the setting. Each setting is represented as its own dict composed
of the following keys:</p>
<ul class="simple">
<li><p>name - the extra setting key</p></li>
<li><p>value - the extra setting value</p></li>
<li><p>blocked - whether the setting represents a block</p></li>
<li><p>tag_name - the name of the tag this setting came from</p></li>
<li><p>tag_id - the ID of the tag this setting came from</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>taginfo</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) -- koji tag info dict, or tag name</p></li>
<li><p><strong>prefix</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) -- Extra name prefix to select for. If set, only tag
extra fields whose key starts with the prefix string will be
collected. Default, collect all.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/collections.html#collections.OrderedDict" title="(in Python v3.9)">collections.OrderedDict</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="kojismokydingo.tags.convert_tag_extras">
<code class="sig-name descname">convert_tag_extras</code><span class="sig-paren">(</span><em class="sig-param">taginfo</em>, <em class="sig-param">into=None</em>, <em class="sig-param">prefix=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/kojismokydingo/tags/#convert_tag_extras"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#kojismokydingo.tags.convert_tag_extras" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a merged view of the tag extra settings for a tag. The
extras are decorated with additional keys:</p>
<blockquote>
<div><ul class="simple">
<li><p>name - str, the name of the setting</p></li>
<li><p>blocked - bool, whether the setting is blocked</p></li>
<li><p>tag_name - str, the name of the tag that provided this setting</p></li>
<li><p>tag_id - int, the ID of the tag that provided this setting</p></li>
</ul>
</div></blockquote>
<p>When into is not None, then only settings which are not already
present in that dict will be set. This behavior is used by
<a class="reference internal" href="#kojismokydingo.tags.collect_tag_extras" title="kojismokydingo.tags.collect_tag_extras"><code class="xref py py-func docutils literal notranslate"><span class="pre">collect_tag_extras()</span></code></a> to merge the extra settings across a
tag and all its parents into a single dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>taginfo</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) -- A koji tag info dict</p></li>
<li><p><strong>into</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a><em>, </em><em>optional</em>) -- Existing dict to collect extras into. Default, create
a new OrderedDict.</p></li>
<li><p><strong>prefix</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) -- Only gather and convert extras with keys having
this prefix. Default, gather all keys not already found.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="kojismokydingo.tags.ensure_tag">
<code class="sig-name descname">ensure_tag</code><span class="sig-paren">(</span><em class="sig-param">session</em>, <em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/kojismokydingo/tags/#ensure_tag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#kojismokydingo.tags.ensure_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a name, resolve it to a tag info dict. If there is no such
tag, then create it and return its newly created tag info.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- tag name</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="kojismokydingo.tags.find_inheritance_parent">
<code class="sig-name descname">find_inheritance_parent</code><span class="sig-paren">(</span><em class="sig-param">inheritance</em>, <em class="sig-param">parent_id</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/kojismokydingo/tags/#find_inheritance_parent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#kojismokydingo.tags.find_inheritance_parent" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the parent link in the inheritance list with the given tag ID.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inheritance</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a><em>]</em>) -- the output of a getFullInheritance call</p></li>
<li><p><strong>parent_id</strong> -- the ID of a parent tag to look for in the
inheritance data.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>matching inheritance link data, or None if none are
found with the given parent_id</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="kojismokydingo.tags.gather_affected_targets">
<code class="sig-name descname">gather_affected_targets</code><span class="sig-paren">(</span><em class="sig-param">session</em>, <em class="sig-param">tagnames</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/kojismokydingo/tags/#gather_affected_targets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#kojismokydingo.tags.gather_affected_targets" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the list of target info dicts representing the targets
which inherit any of the given named tags. That is to say, the
targets whose build tags are children of the named tags.</p>
<p>This list allows us to gauge what build configurations would be
impacted by changes to the given tags.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tagnames</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>]</em>) -- List of tag names</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="../#kojismokydingo.NoSuchTag" title="kojismokydingo.NoSuchTag"><strong>NoSuchTag</strong></a> -- if any of the names do not resolve to a tag
info</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="kojismokydingo.tags.gather_tag_ids">
<code class="sig-name descname">gather_tag_ids</code><span class="sig-paren">(</span><em class="sig-param">session</em>, <em class="sig-param">shallow=()</em>, <em class="sig-param">deep=()</em>, <em class="sig-param">results=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/kojismokydingo/tags/#gather_tag_ids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#kojismokydingo.tags.gather_tag_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Load IDs from shallow tags, and load IDs from deep tags and all
their parents. Returns a set of all IDs found.</p>
<p>If results is specified, it must be a set instance into which the
disovered tag IDs will be added. Otherwise a new set will be
allocated and returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shallow</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>]</em><em>, </em><em>optional</em>) -- list of tag names to resolve IDs for</p></li>
<li><p><strong>deep</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>]</em><em>, </em><em>optional</em>) -- list of tag names to resolve IDs and parent IDs for</p></li>
<li><p><strong>results</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#set" title="(in Python v3.9)"><em>set</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>]</em><em>, </em><em>optional</em>) -- storage for resolved IDs. Default, create a new set</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#set" title="(in Python v3.9)">set</a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="kojismokydingo.tags.renum_inheritance">
<code class="sig-name descname">renum_inheritance</code><span class="sig-paren">(</span><em class="sig-param">inheritance</em>, <em class="sig-param">begin=0</em>, <em class="sig-param">step=10</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/kojismokydingo/tags/#renum_inheritance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#kojismokydingo.tags.renum_inheritance" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new copy of the tag inheritance data with the priority
values renumbered. Ordering is preserved.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inheritance</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a><em>]</em>) -- Inheritance structure data</p></li>
<li><p><strong>begin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) -- Starting point for renumbering priority
values. Default, 0</p></li>
<li><p><strong>step</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) -- Priority value increment for each priority after the
first. Default, 10</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="kojismokydingo.tags.resolve_tag">
<code class="sig-name descname">resolve_tag</code><span class="sig-paren">(</span><em class="sig-param">session</em>, <em class="sig-param">name</em>, <em class="sig-param">target=False</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/kojismokydingo/tags/#resolve_tag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#kojismokydingo.tags.resolve_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a name, resolve it to a taginfo.</p>
<p>If target is False, name is treated as a tag's name.</p>
<p>If target is True, name is treated as a target's name, and the
resulting taginfo will be from that target's build tag.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- Tag or Target name</p></li>
<li><p><strong>target</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) -- name specified a target rather than a tag, fetch
the build tag name from the target and look up that. Default,
name specifies a tag.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="../#kojismokydingo.NoSuchTag" title="kojismokydingo.NoSuchTag"><strong>NoSuchTag</strong></a> -- </p></li>
<li><p><a class="reference internal" href="../#kojismokydingo.NoSuchTarget" title="kojismokydingo.NoSuchTarget"><strong>NoSuchTarget</strong></a> -- </p></li>
</ul>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="kojismokydingo.tags.tag_dedup">
<code class="sig-name descname">tag_dedup</code><span class="sig-paren">(</span><em class="sig-param">tag_infos</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/kojismokydingo/tags/#tag_dedup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#kojismokydingo.tags.tag_dedup" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a sequence of tag info dictionaries, return a de-duplicated
list of same, with order preserved.</p>
<p>All None infos will be dropped.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tag_infos</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a><em>]</em>) -- tag infos to be de-duplicated.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a>]</p>
</dd>
</dl>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="../hosts/"
                        title="previous chapter">kojismokydingo.hosts</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../users/"
                        title="next chapter">kojismokydingo.users</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/kojismokydingo/tags.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../users/" title="kojismokydingo.users"
             >next</a> |</li>
        <li class="right" >
          <a href="../hosts/" title="kojismokydingo.hosts"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">kojismokydingo 0.9.7 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../" >Core API Reference</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Christopher O&#39;Brien.
      Last updated on 2021-03-10.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.2.
    </div>
  </body>
</html>