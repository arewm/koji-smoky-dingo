
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="English">
  <head>
    <meta charset="utf-8" />
    <title>Overview &#8212; kojismokydingo 0.9.6 documentation</title>
    <link rel="stylesheet" href="../_static/pyramid.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Plugin Commands" href="../commands/" />
    <link rel="prev" title="Koji Smoky Dingo" href="../" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head><body>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../commands/" title="Plugin Commands"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../" title="Koji Smoky Dingo"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../">kojismokydingo 0.9.6 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<p>Koji Smoky Dingo is a collection of client command-line plugins for the
<a class="reference external" href="https://pagure.io/koji">Koji</a> build system, and a set of utility
modules for writing your own commands or scripts.</p>
<p>The phrase “smoky-dingo” was provided by
<a class="reference external" href="https://pypi.org/project/coolname/">coolname</a> and has no particular
relevance.</p>
<div class="section" id="meta-plugin">
<h2>Meta Plugin<a class="headerlink" href="#meta-plugin" title="Permalink to this headline">¶</a></h2>
<p>This project provides a relatively tiny CLI plugin for koji, named
kojismokydingometa. This plugin acts as an adapter between koji’s
existing CLI framework and Python’s entry_points. This adaptive behavior
is utilized by the rest of the project to add its own additional
commands to koji.</p>
<p>The meta plugin can be used to load commands other than those provided
as part of this project. Simply register your commands with the
<code class="docutils literal notranslate"><span class="pre">&quot;koji_smoky_dingo&quot;</span></code> entry point key. See the example command’s
<a class="reference external" href="https://github.com/obriencj/koji-smoky-dingo/blob/master/examples/command/setup.py">setup.py</a>
for a direct reference.</p>
</div>
<div class="section" id="tag-commands">
<h2>Tag Commands<a class="headerlink" href="#tag-commands" title="Permalink to this headline">¶</a></h2>
<p>These commands modify tag features, requiring either the tag permission
(koji &gt;=
<a class="reference external" href="https://docs.pagure.org/koji/release_notes/release_notes_1.18/">1.18</a>)
or the admin permission.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 41%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">block-env-var</span></code></p></td>
<td><p>Blocks a mock environment variable from
a tag.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">block-rpm-macro</span></code></p></td>
<td><p>Blocks a mock RPM macro from a tag.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bulk—tag-builds</span></code></p></td>
<td><p>Quickly tag a large amount of builds,
bypassing the creation of individual
tasks.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">remove-env-var</span></code></p></td>
<td><p>Removes a mock environment variable
from a tag.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">remove-rpm-macro</span></code></p></td>
<td><p>Removes a mock RPM macro from a tag.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">renum—tag-inheritance</span></code></p></td>
<td><p>Adjust the priority values of a tag to
maintain the same inheritance order,
but to create an even amount of space
between each entry.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">set-env-var</span></code></p></td>
<td><p>Sets, unsets, or blocks the value of a
mock environment variable on a tag.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">set-rpm-macro</span></code></p></td>
<td><p>Sets, unsets, or blocks the value of a
mock RPM macro on a tag.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">swap—tag-inheritance</span></code></p></td>
<td><p>Adjust the inheritance of a tag by
replacing one entry for another. If
both entries are already parents of a
tag, then swap the priority of the two.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="information-commands">
<h2>Information Commands<a class="headerlink" href="#information-commands" title="Permalink to this headline">¶</a></h2>
<p>These commands are informational only, and do not require any special
permissions in koji.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 41%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">affected—targets</span></code></p></td>
<td><p>Show targets which would be impacted by
modifications to the given tag</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cginfo</span></code></p></td>
<td><p>Show content generators and their
permitted users</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">check—hosts</span></code></p></td>
<td><p>Show builder hosts which haven’t been
checking in lately</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">client-config</span></code></p></td>
<td><p>Show settings for client profiles</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">filter-builds</span></code></p></td>
<td><p>Filter a list of NVRs by various
criteria</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">filter-tags</span></code></p></td>
<td><p>Filter a list of tags by various
criteria</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">latest-archives</span></code></p></td>
<td><p>Show selected latest archives from a
tag</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">list-btypes</span></code></p></td>
<td><p>Show build types</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">list-build-archives</span></code></p></td>
<td><p>Show selected archives attached to a
build</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">list-cgs</span></code></p></td>
<td><p>Show content generators</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">list-component-builds</span></code></p></td>
<td><p>Show builds which were used to produce
others</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">list-env-vars</span></code></p></td>
<td><p>Show all inherited mock environment
variables for a tag</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">list-rpm-macros</span></code></p></td>
<td><p>Show all inherited mock RPM macros for
a tag</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">list-tag-extras</span></code></p></td>
<td><p>Show all inherited extra fields for a
tag</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">open</span></code></p></td>
<td><p>Opens a brower to the info page for
koji data types</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">perminfo</span></code></p></td>
<td><p>Show information about a permission</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">userinfo</span></code></p></td>
<td><p>Show information about a user account</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="install">
<h2>Install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h2>
<p>The kojismokydingo package utilizes setuptools and can be built and
installed as an egg or wheel.</p>
<p>Because of how koji loads client plugins, if you want the meta plugin
available by default system-wide, then the package needs to be installed
into the default site-packages for the python installation.</p>
<div class="section" id="using-rpm">
<h3>Using RPM<a class="headerlink" href="#using-rpm" title="Permalink to this headline">¶</a></h3>
<p>If using an RPM-based distribution, this is easily achieved using the
included spec to produce an RPM and install that.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make clean rpm
dnf install dist/noarch/python3-kojismokydingo-0.9.6-1.fc32.noarch.rpm
</pre></div>
</div>
</div>
<div class="section" id="system-wide-using-python">
<h3>System-wide Using Python<a class="headerlink" href="#system-wide-using-python" title="Permalink to this headline">¶</a></h3>
<p>Using traditional setuptools or pip installation methods can also
achieve this by specifying the specific root or prefix parameter</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Python 2.6 global install</span>
sudo python setup.py clean build install --root<span class="o">=</span>/

<span class="c1"># Python 2.7 global install</span>
python3 setup.py bdist_wheel
pip3 install --prefix /usr -I dist/kojismokydingo-0.9.6-py2-none-any.whl

<span class="c1"># Python 3 global install</span>
python3 setup.py bdist_wheel
pip3 install --prefix /usr -I dist/kojismokydingo-0.9.6-py3-none-any.whl
</pre></div>
</div>
</div>
<div class="section" id="user-only-using-python">
<h3>User-only Using Python<a class="headerlink" href="#user-only-using-python" title="Permalink to this headline">¶</a></h3>
<p>However, if you only want the plugin available for yourself, you can
install it anywhere and tell koji to look in that particular
<code class="docutils literal notranslate"><span class="pre">site-package/koji_cli_plugins</span></code> instance</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Python 3 user install</span>
python3 setup.py bdist_wheel
pip3 install --user -I dist/kojismokydingo-0.9.6-py3-none-any.whl
</pre></div>
</div>
<p>And the following setting in ~/.koji/config assuming Python version 3.7
– read the output of the install command above to verify your install
path. Note that the section title needs to match your koji profile, and
that you need to configure this setting for each profile you’ll want to
use the meta plugin with.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">koji</span><span class="p">]</span>
<span class="n">plugin_paths</span> <span class="o">=</span> <span class="o">~/.</span><span class="n">local</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">7</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">koji_cli_plugins</span><span class="o">/</span>
</pre></div>
</div>
<p>With koji &gt;=
<a class="reference external" href="https://docs.pagure.org/koji/release_notes/release_notes_1.18/">1.18</a>,
the meta plugin can also be symlinked into <code class="docutils literal notranslate"><span class="pre">~/.koji/plugins</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir -p ~/.koji/plugins
ln -s ~/.local/lib/python3.7/site-packages/koji_cli_plugins/kojismokydingometa.py ~/.koji/plugins
</pre></div>
</div>
</div>
</div>
<div class="section" id="contact">
<h2>Contact<a class="headerlink" href="#contact" title="Permalink to this headline">¶</a></h2>
<p>Author: Christopher O’Brien <a class="reference external" href="mailto:obriencj&#37;&#52;&#48;gmail&#46;com">obriencj<span>&#64;</span>gmail<span>&#46;</span>com</a></p>
<p>Original Git Repository: <a class="reference external" href="https://github.com/obriencj/koji-smoky-dingo">https://github.com/obriencj/koji-smoky-dingo</a></p>
<p>Documentation: <a class="reference external" href="https://obriencj.github.io/koji-smoky-dingo">https://obriencj.github.io/koji-smoky-dingo</a></p>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>This library is free software; you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the
Free Software Foundation; either version 3 of the License, or (at your
option) any later version.</p>
<p>This library is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along
with this library; if not, see <a class="reference external" href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Overview</a><ul>
<li><a class="reference internal" href="#meta-plugin">Meta Plugin</a></li>
<li><a class="reference internal" href="#tag-commands">Tag Commands</a></li>
<li><a class="reference internal" href="#information-commands">Information Commands</a></li>
<li><a class="reference internal" href="#install">Install</a><ul>
<li><a class="reference internal" href="#using-rpm">Using RPM</a></li>
<li><a class="reference internal" href="#system-wide-using-python">System-wide Using Python</a></li>
<li><a class="reference internal" href="#user-only-using-python">User-only Using Python</a></li>
</ul>
</li>
<li><a class="reference internal" href="#contact">Contact</a></li>
<li><a class="reference internal" href="#license">License</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../"
                        title="previous chapter">Koji Smoky Dingo</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../commands/"
                        title="next chapter">Plugin Commands</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/overview.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../commands/" title="Plugin Commands"
             >next</a> |</li>
        <li class="right" >
          <a href="../" title="Koji Smoky Dingo"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../">kojismokydingo 0.9.6 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Christopher O&#39;Brien.
      Last updated on 2021-01-16.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.2.
    </div>
  </body>
</html>